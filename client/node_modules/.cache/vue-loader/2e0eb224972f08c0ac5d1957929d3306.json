{"remainingRequest":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vlira/Documentos/ProntuarioBM/views/src/views/Pessoas.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vlira/Documentos/ProntuarioBM/views/src/views/Pessoas.vue","mtime":1568598923723},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data: () => ({\n        dialog: false,\n        search: \"\",\n        date: new Date().toISOString().substr(0, 10),\n        menu: false,\n        estadosCivils: [\n            \"SOLTEIRO\",\n            \"CASADO\",\n            \"DIVORCIADO\"\n        ],\n        lts: [\n            \"SIM\",\n            \"NÃO\"\n        ],\n        hierarquias: [],\n        obms: [],\n        setores: [],\n        escalas: [],\n        sexos: [\n            \"MASCULINO\",\n            \"FEMININO\"\n        ],\n        tiposSanguineo: [\n            \"A+\",\n            \"A-\",\n            \"B+\",\n            \"B-\",\n            \"AB+\",\n            \"AB-\",\n            \"O+\",\n            \"O-\"\n        ],\n        imgSrc: null,\n        textoSnackbar: \"\",\n        color: '',\n        mode: '',\n        snackbar: false,\n        timeout: 6000,\n        x: null,\n        y: 'top',\n        rowsPerPageItems: [8, 12, 15],\n        pagination: {\n            rowsPerPage: 20\n        },\n        headers: [\n            {\n                text: 'Nome',\n                align: 'left',\n                sortable: true,\n                value: 'nome',\n            },\n            { text: 'Matrícula', value: 'matricula' },\n            { text: 'C.M.S', value: 'cartaoMunicipalSus' },\n            { text: 'C.N.S', value: 'cartaoNacionalSus' },\n            { text: 'Sexo', value: 'sexo' },\n            { text: 'Tipo Sanguíneo',align: 'center', value: 'tipoSanguineo' },\n            { text: 'Ações', value: 'action', sortable: false },\n        ],\n        desserts: [],\n        editedIndex: -1,\n        editedItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n        defaultItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n    }),\n\n    computed: {\n        formTitle () {\n            return this.editedIndex === -1 ? 'Nova Pessoa' : 'Editar Pessoa'\n        },\n    },\n\n    watch: {\n        dialog (val) {\n            val || this.close()\n        },\n    },\n\n    created () {\n        this.initialize()\n    },\n\n    methods: {\n        initialize () {\n            this.desserts = [\n                {\n                    nome: \"TESTE\",\n                    matricula: \"123456-7\",\n                    cartaoMunicipalSus: \"123456\",\n                    cartaoNacionalSus: \"123 4567 8912 345\",\n                    sexo: \"MASCULINO\",\n                    tipoSanguineo: \"+O\"\n                }\n            ];\n\n            this.axios.get('http://localhost:3000/pessoa').then(response => {\n                this.desserts = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/hierarquia').then(response => {\n                this.hierarquias = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/batalhao').then(response => {\n                this.obms = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/setor').then(response => {\n                this.setores = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/escala').then(response => {\n                this.escalas = response.data;\n            });\n        },\n\n        editItem (item) {\n            this.editedIndex = this.desserts.indexOf(item);\n            this.editedItem = Object.assign({}, item);\n            this.dialog = true;\n        },\n\n        deleteItem (item) {\n            const index = this.desserts.indexOf(item);\n            confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1);\n        },\n\n        close () {\n            this.dialog = false;\n            setTimeout(() => {\n                this.editedItem = Object.assign({}, this.defaultItem)\n                this.editedIndex = -1\n            }, 300);\n        },\n        save () {\n            if (this.editedIndex > -1) {\n                Object.assign(this.desserts[this.editedIndex], this.editedItem);\n            } else {\n                this.desserts.push(this.editedItem);\n                console.log(this.editedItem);\n                this.axios.post('http://localhost:3000/pessoa', this.editedItem).then(response => {\n                    if(response.data.id){\n                        this.textoSnackbar = \"Pessoa inserida com sucesso!\";\n                        this.snackbar = true;\n                        this.color = 'success';\n                        this.initialize();\n                    }else {\n                        this.snackbar = true;\n                        this.color = 'error';\n                        this.textoSnackbar = \"Ocorreu um erro ao cadastrar!\";\n                    }\n                });\n\n            }\n            this.close();\n        },\n        setImage: function (e) {\n            const file = e[0];\n\n            if (!file.type.includes('image/')) {\n                alert('Por favor selecione a foto!');\n                return;\n            }\n\n            if (typeof FileReader === 'function') {\n                const reader = new FileReader();\n\n                reader.onload = (event) => {\n                    this.imgSrc = event.target.result;\n                    this.editedItem.foto = this.imgSrc;\n                }\n                reader.readAsDataURL(file);\n            } else {\n                alert('Sorry, FileReader API not supported');\n            }\n        }\n    }\n}\n",{"version":3,"sources":["Pessoas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pessoas.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"desserts\"\n        :search=\"search\"\n        sort-by=\"calories\"\n        class=\"elevation-1 ma-2\"\n        :footer-props=\"{\n            'items-per-page-options': [8,10,12,14]\n        }\"\n    >\n        <template v-slot:top>\n            <v-toolbar flat color=\"white\">\n                <v-text-field\n                    v-model=\"search\"\n                    append-icon=\"mdi-magnify\"\n                    label=\"Buscar\"\n                    single-line\n                    hide-details\n                    outlined\n                ></v-text-field>\n                <div class=\"flex-grow-1\"></div>\n\n                <v-dialog v-model=\"dialog\" max-width=\"1000px\">\n\n                    <template v-slot:activator=\"{ on }\">\n                        <v-btn color=\"primary\" class=\"mb-2\" v-on=\"on\">Nova</v-btn>\n                    </template>\n\n                    <v-card>\n                        <v-card-title>\n                            <span class=\"headline\">{{ formTitle }}</span>\n                        </v-card-title>\n\n                        <v-card-text>\n                            <v-container>\n                                <v-row>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                                        <v-text-field v-model=\"editedItem.nome\" label=\"Nome\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                                        <v-text-field v-model=\"editedItem.email\" label=\"E-mail\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field v-model=\"editedItem.matricula\" label=\"Matrícula\" outlined></v-text-field>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field v-model=\"editedItem.dataNascimento\" label=\"Data Nascimento\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-select :items=\"estadosCivils\" v-model=\"editedItem.estadoCivil\" label=\"Estado Civil\" outlined></v-select>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field v-model=\"editedItem.dataIngresso\" label=\"Data Ingresso\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-text-field v-model=\"editedItem.cartaoMunicipalSus\" label=\"Cartão Municipal SUS\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-text-field v-model=\"editedItem.cartaoNacionalSus\" label=\"Cartão Nacional SUS\" outlined></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"sexos\" v-model=\"editedItem.sexo\" label=\"Sexo\" outlined></v-select>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"tiposSanguineo\" v-model=\"editedItem.tipoSanguineo\" label=\"Tipo Sanguineo\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"lts\" v-model=\"editedItem.lts\" label=\"LTS\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"hierarquias\" item-text=\"hierarquia\" item-value=\"id\" v-model=\"editedItem.idHierarquia\" label=\"Hierarquia\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"obms\" v-model=\"editedItem.idBatalhao\" item-text=\"abreviacao\" item-value=\"id\" label=\"OBM\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"setores\" item-text=\"setor\" item-value=\"id\" v-model=\"editedItem.idSetor\" label=\"Setor\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select :items=\"escalas\" v-model=\"editedItem.idEscala\" item-text=\"escala\" item-value=\"id\"  label=\"Escala\" outlined></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-file-input\n\n                                            color=\"deep-purple accent-4\"\n                                            counter\n                                            label=\"Foto\"\n                                            multiple\n                                            placeholder=\"\"\n                                            prepend-icon=\"mdi-camera\"\n                                            outlined\n                                            :show-size=\"1000\"\n                                            @change=\"setImage\"\n                                        >\n                                            <template v-slot:selection=\"{ index, text }\">\n                                                <v-chip\n                                                    v-if=\"index < 2\"\n                                                    color=\"deep-purple accent-4\"\n                                                    dark\n                                                    label\n                                                    small\n                                                >\n                                                    {{ text }}\n                                                </v-chip>\n\n                                                <span\n                                                    v-else-if=\"index === 2\"\n                                                    class=\"overline grey--text text--darken-3 mx-2\"\n                                                >\n                                                    +{{ foto.length - 2 }} Arquivo\n                                                </span>\n                                            </template>\n                                        </v-file-input>\n                                    </v-col>\n\n                                </v-row>\n                            </v-container>\n                        </v-card-text>\n\n                        <v-card-actions>\n                            <div class=\"flex-grow-1\"></div>\n                            <v-btn color=\"blue darken-1\" text @click=\"close\">Cancelar</v-btn>\n                            <v-btn color=\"blue darken-1\" text @click=\"save\">Salvar</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n            </v-toolbar>\n        </template>\n\n        <template v-slot:item.action=\"{ item }\">\n            <v-icon\n                small\n                class=\"mr-2\"\n                @click=\"editItem(item)\"\n            >\n                mdi-pencil\n            </v-icon>\n            <v-icon\n                small\n                @click=\"deleteItem(item)\"\n            >\n                mdi-delete\n            </v-icon>\n            </template>\n\n            <template v-slot:no-data>\n            <v-btn color=\"primary\" @click=\"initialize\">Reset</v-btn>\n        </template>\n\n        <v-snackbar\n                v-model=\"snackbar\"\n                :bottom=\"y === 'bottom'\"\n                :color=\"color\"\n                :left=\"x === 'left'\"\n                :multi-line=\"mode === 'multi-line'\"\n                :right=\"x === 'right'\"\n                :timeout=\"timeout\"\n                :top=\"y === 'top'\"\n                :vertical=\"mode === 'vertical'\"\n            >\n\n                {{ textoSnackbar }}\n                <v-btn\n                dark\n                text\n                @click=\"snackbar = false\"\n                >\n                    Fechar\n                </v-btn>\n        </v-snackbar>\n    </v-data-table>\n\n</template>\n\n<script>\nexport default {\n    data: () => ({\n        dialog: false,\n        search: \"\",\n        date: new Date().toISOString().substr(0, 10),\n        menu: false,\n        estadosCivils: [\n            \"SOLTEIRO\",\n            \"CASADO\",\n            \"DIVORCIADO\"\n        ],\n        lts: [\n            \"SIM\",\n            \"NÃO\"\n        ],\n        hierarquias: [],\n        obms: [],\n        setores: [],\n        escalas: [],\n        sexos: [\n            \"MASCULINO\",\n            \"FEMININO\"\n        ],\n        tiposSanguineo: [\n            \"A+\",\n            \"A-\",\n            \"B+\",\n            \"B-\",\n            \"AB+\",\n            \"AB-\",\n            \"O+\",\n            \"O-\"\n        ],\n        imgSrc: null,\n        textoSnackbar: \"\",\n        color: '',\n        mode: '',\n        snackbar: false,\n        timeout: 6000,\n        x: null,\n        y: 'top',\n        rowsPerPageItems: [8, 12, 15],\n        pagination: {\n            rowsPerPage: 20\n        },\n        headers: [\n            {\n                text: 'Nome',\n                align: 'left',\n                sortable: true,\n                value: 'nome',\n            },\n            { text: 'Matrícula', value: 'matricula' },\n            { text: 'C.M.S', value: 'cartaoMunicipalSus' },\n            { text: 'C.N.S', value: 'cartaoNacionalSus' },\n            { text: 'Sexo', value: 'sexo' },\n            { text: 'Tipo Sanguíneo',align: 'center', value: 'tipoSanguineo' },\n            { text: 'Ações', value: 'action', sortable: false },\n        ],\n        desserts: [],\n        editedIndex: -1,\n        editedItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n        defaultItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n    }),\n\n    computed: {\n        formTitle () {\n            return this.editedIndex === -1 ? 'Nova Pessoa' : 'Editar Pessoa'\n        },\n    },\n\n    watch: {\n        dialog (val) {\n            val || this.close()\n        },\n    },\n\n    created () {\n        this.initialize()\n    },\n\n    methods: {\n        initialize () {\n            this.desserts = [\n                {\n                    nome: \"TESTE\",\n                    matricula: \"123456-7\",\n                    cartaoMunicipalSus: \"123456\",\n                    cartaoNacionalSus: \"123 4567 8912 345\",\n                    sexo: \"MASCULINO\",\n                    tipoSanguineo: \"+O\"\n                }\n            ];\n\n            this.axios.get('http://localhost:3000/pessoa').then(response => {\n                this.desserts = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/hierarquia').then(response => {\n                this.hierarquias = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/batalhao').then(response => {\n                this.obms = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/setor').then(response => {\n                this.setores = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/escala').then(response => {\n                this.escalas = response.data;\n            });\n        },\n\n        editItem (item) {\n            this.editedIndex = this.desserts.indexOf(item);\n            this.editedItem = Object.assign({}, item);\n            this.dialog = true;\n        },\n\n        deleteItem (item) {\n            const index = this.desserts.indexOf(item);\n            confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1);\n        },\n\n        close () {\n            this.dialog = false;\n            setTimeout(() => {\n                this.editedItem = Object.assign({}, this.defaultItem)\n                this.editedIndex = -1\n            }, 300);\n        },\n        save () {\n            if (this.editedIndex > -1) {\n                Object.assign(this.desserts[this.editedIndex], this.editedItem);\n            } else {\n                this.desserts.push(this.editedItem);\n                console.log(this.editedItem);\n                this.axios.post('http://localhost:3000/pessoa', this.editedItem).then(response => {\n                    if(response.data.id){\n                        this.textoSnackbar = \"Pessoa inserida com sucesso!\";\n                        this.snackbar = true;\n                        this.color = 'success';\n                        this.initialize();\n                    }else {\n                        this.snackbar = true;\n                        this.color = 'error';\n                        this.textoSnackbar = \"Ocorreu um erro ao cadastrar!\";\n                    }\n                });\n\n            }\n            this.close();\n        },\n        setImage: function (e) {\n            const file = e[0];\n\n            if (!file.type.includes('image/')) {\n                alert('Por favor selecione a foto!');\n                return;\n            }\n\n            if (typeof FileReader === 'function') {\n                const reader = new FileReader();\n\n                reader.onload = (event) => {\n                    this.imgSrc = event.target.result;\n                    this.editedItem.foto = this.imgSrc;\n                }\n                reader.readAsDataURL(file);\n            } else {\n                alert('Sorry, FileReader API not supported');\n            }\n        }\n    }\n}\n</script>\n"]}]}