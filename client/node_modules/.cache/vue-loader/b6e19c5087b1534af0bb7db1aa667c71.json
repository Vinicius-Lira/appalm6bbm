{"remainingRequest":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vlira/Documentos/ProntuarioBM/views/src/views/Pessoas.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vlira/Documentos/ProntuarioBM/views/src/views/Pessoas.vue","mtime":1568681402954},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vlira/Documentos/ProntuarioBM/views/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data: () => ({\n        dialog: false,\n        search: \"\",\n        estadosCivils: [\n            \"SOLTEIRO\",\n            \"CASADO\",\n            \"DIVORCIADO\"\n        ],\n        lts: [\n            \"SIM\",\n            \"NÃO\"\n        ],\n        hierarquias: [],\n        obms: [],\n        setores: [],\n        escalas: [],\n        sexos: [\n            \"MASCULINO\",\n            \"FEMININO\"\n        ],\n        tiposSanguineo: [\n            \"A+\",\n            \"A-\",\n            \"B+\",\n            \"B-\",\n            \"AB+\",\n            \"AB-\",\n            \"O+\",\n            \"O-\"\n        ],\n        imgSrc: null,\n        textoSnackbar: \"\",\n        color: 'success',\n        mode: '',\n        snackbar: false,\n        timeout: 6000,\n        x: null,\n        y: 'top',\n        reg: '/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/',\n        rowsPerPageItems: [8, 12, 15],\n        pagination: {\n            rowsPerPage: 20\n        },\n        headers: [\n            {\n                text: 'Nome',\n                align: 'left',\n                sortable: true,\n                value: 'nome',\n            },\n            { text: 'Matrícula', value: 'matricula' },\n            { text: 'C.M.S', value: 'cartaoMunicipalSus' },\n            { text: 'C.N.S', value: 'cartaoNacionalSus' },\n            { text: 'Sexo', value: 'sexo' },\n            { text: 'Tipo Sanguíneo',align: 'center', value: 'tipoSanguineo' },\n            { text: 'Ações', value: 'action', sortable: false },\n        ],\n        desserts: [],\n        editedIndex: -1,\n        editedItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            dataIngresso: \"\",\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\",\n            mode: 'no-cors',\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json',\n        },\n        defaultItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            dataIngresso: \"\",\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n    }),\n\n    computed: {\n        formTitle () {\n            return this.editedIndex === -1 ? 'Nova Pessoa' : 'Editar Pessoa'\n        }\n    },\n\n    watch: {\n        dialog (val) {\n            val || this.close()\n        },\n    },\n\n    created () {\n        this.initialize()\n    },\n    methods: {\n        initialize () {\n            this.desserts = [\n                {\n                    nome: \"TESTE\",\n                    matricula: \"123456-7\",\n                    cartaoMunicipalSus: \"123456\",\n                    cartaoNacionalSus: \"123 4567 8912 345\",\n                    sexo: \"MASCULINO\",\n                    tipoSanguineo: \"+O\"\n                }\n            ];\n\n            this.axios.get('http://localhost:3000/pessoa').then(response => {\n                this.desserts = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/hierarquia').then(response => {\n                this.hierarquias = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/batalhao').then(response => {\n                this.obms = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/setor').then(response => {\n                this.setores = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/escala').then(response => {\n                this.escalas = response.data;\n            });\n        },\n\n        editItem (item) {\n            this.editedIndex = this.desserts.indexOf(item);\n            this.editedItem = Object.assign({}, item);\n            this.dialog = true;\n        },\n\n        deleteItem (item) {\n            const index = this.desserts.indexOf(item);\n            confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1);\n        },\n\n        close () {\n            this.dialog = false;\n            setTimeout(() => {\n                this.editedItem = Object.assign({}, this.defaultItem)\n                this.editedIndex = -1\n            }, 300);\n        },\n        isValidDate(date) {\n            var aux = [];\n            if(date != ''){\n                aux = date.split('/');\n                if(parseInt(aux[0]) > 0 && parseInt(aux[0]) < 31){\n                    if(parseInt(aux[1]) > 0 && parseInt(aux[1]) < 12){\n                        if(parseInt(aux[2]) > 1900 && parseInt(aux[2]) < 3000){\n                            return true;\n                        }else {\n                            return false;\n                        }\n                    }else {\n                        return false;\n                    }\n                }else {\n                    return false;\n                }\n            }else {\n                return false;\n            }\n        },\n        isValidEmail() {\n            return (this.editedItem.email == \"\")? false : (this.reg.test(this.editedItem.email)) ? true : false;\n        },\n        isValidDateEntrance() {\n            return this.isValidDate(this.editedItem.dataIngresso) && this.isValidDate(this.editedItem.dataNascimento) ? parseInt(this.editedItem.dataIngresso.split('/')[2]) > parseInt(this.editedItem.dataNascimento.split('/')[2]) : false;\n        },\n        validaCampos() {\n            return  this.editedItem.nome != '' &&\n                    this.isValidEmail() &&\n                    this.editedItem.matricula != '' &&\n                    isValidDateEntrance() &&\n                    this.editedItem.estadoCivil != null &&\n                    this.editedItem.cartaoNacionalSus != '' &&\n                    this.editedItem.cartaoMunicipalSus != '' &&\n                    this.editedItem.sexo != '' &&\n                    this.editedItem.tipoSanguineo != \"\" &&\n                    this.editedItem.lts != '' &&\n                    this.editedItem.idHierarquia != null &&\n                    this.editedItem.idBatalhao != null &&\n                    this.editedItem.idSetor != null &&\n                    this.editedItem.idEscala != null &&\n                    this.editedItem.foto != '';\n        },\n        save () {\n            if (this.editedIndex > -1) {\n                Object.assign(this.desserts[this.editedIndex], this.editedItem);\n            } else {\n                if(this.validaCampos()){\n                    this.axios.post('http://localhost:3000/pessoa', this.editedItem).then(response => {\n                        if(response.data.id){\n                            this.textoSnackbar = \"Pessoa inserida com sucesso!\";\n                            this.snackbar = true;\n                            this.color = 'success';\n                            this.initialize();\n                            this.close();\n                        }else {\n                            this.snackbar = true;\n                            this.color = 'error';\n                            this.textoSnackbar = \"Ocorreu um erro ao cadastrar!\";\n                            this.close();\n                        }\n                    });\n                }else {\n                    this.snackbar = true;\n                    this.color = 'error';\n                    this.textoSnackbar = \"Existe campos vazios ou incorretos!\";\n                    this.close();\n                }\n            }\n        },\n        setImage: function (e) {\n            const file = e[0];\n\n            if (!file.type.includes('image/')) {\n                alert('Por favor selecione a foto!');\n                return;\n            }\n\n            if (typeof FileReader === 'function') {\n                const reader = new FileReader();\n\n                reader.onload = (event) => {\n                    this.imgSrc = event.target.result;\n                    this.editedItem.foto = this.imgSrc;\n                }\n                reader.readAsDataURL(file);\n            } else {\n                alert('Sorry, FileReader API not supported');\n            }\n        }\n    }\n}\n",{"version":3,"sources":["Pessoas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pessoas.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"desserts\"\n        :search=\"search\"\n        sort-by=\"calories\"\n        class=\"elevation-1 ma-2\"\n        :footer-props=\"{\n            'items-per-page-options': [8,10,12,14]\n        }\"\n    >\n\n        <template v-slot:top>\n            <v-toolbar flat color=\"white\">\n\n                <v-container>\n                    <v-row>\n                        <v-col cols=\"12\" sm=\"12\" md=\"5\">\n                            <v-text-field\n                                v-model=\"search\"\n                                append-icon=\"mdi-magnify\"\n                                label=\"Buscar\"\n                                single-line\n                                hide-details\n                                outlined\n                            ></v-text-field>\n                        </v-col>\n                    </v-row>\n                </v-container>\n                <v-snackbar\n                        v-model=\"snackbar\"\n                        :bottom=\"y === 'bottom'\"\n                        :color=\"color\"\n                        :left=\"x === 'left'\"\n                        :multi-line=\"mode === 'multi-line'\"\n                        :right=\"x === 'right'\"\n                        :timeout=\"timeout\"\n                        :top=\"y === 'top'\"\n                        :vertical=\"mode === 'vertical'\"\n\n                        class=\"snackbar\"\n                    >\n                        {{ textoSnackbar }}\n                        <v-btn\n                            dark\n                            text\n                            icon\n                            @click=\"snackbar = false\"\n                        >\n                            <v-icon\n                                class=\"mr-2\"\n                                @click=\"snackbar = false\"\n                            >mdi-close</v-icon>\n                        </v-btn>\n                </v-snackbar>\n                <div class=\"flex-grow-1\"></div>\n\n                <v-dialog v-model=\"dialog\" max-width=\"1000px\">\n\n                    <template v-slot:activator=\"{ on }\">\n                        <v-btn color=\"primary\" class=\"mb-2\"  v-on=\"on\">Nova</v-btn>\n                    </template>\n\n                    <v-card>\n                        <v-card-title>\n                            <span class=\"headline\">{{ formTitle }}</span>\n                        </v-card-title>\n\n                        <v-card-text>\n                            <v-container>\n                                <v-row>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                                        <v-text-field\n                                            v-model=\"editedItem.nome\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o nome!']\"\n                                            label=\"Nome\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                                        <v-text-field\n                                            v-model=\"editedItem.email\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o email!']\"\n                                            label=\"E-mail\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field\n                                            v-model=\"editedItem.matricula\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o matrícula!']\"\n                                            v-mask=\"['######-#', '######-#-##']\"\n                                            label=\"Matrícula\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field\n                                            v-model=\"editedItem.dataNascimento\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher a data nascimento!']\"\n                                            v-mask=\"['##/##/####']\"\n                                            label=\"Data Nascimento\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-select\n                                            :items=\"estadosCivils\"\n                                            v-model=\"editedItem.estadoCivil\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o estado civil!']\"\n                                            label=\"Estado Civil\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                                        <v-text-field\n                                            v-model=\"editedItem.dataIngresso\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher a data de ingresso!']\"\n                                            v-mask=\"['##/##/####']\"\n                                            label=\"Data Ingresso\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-text-field\n                                            v-model=\"editedItem.cartaoMunicipalSus\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o cartão municipal do SUS!']\"\n                                            v-mask=\"['######']\"\n                                            label=\"Cartão Municipal SUS\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-text-field\n                                            v-model=\"editedItem.cartaoNacionalSus\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o cartão nacional do SUS!']\"\n                                            v-mask=\"['### #### #### ####']\"\n                                            label=\"Cartão Nacional SUS\"\n                                            outlined\n                                        ></v-text-field>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"sexos\"\n                                            v-model=\"editedItem.sexo\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o sexo!']\"\n                                            label=\"Sexo\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"tiposSanguineo\"\n                                            v-model=\"editedItem.tipoSanguineo\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o tipo sanguineo!']\"\n                                            label=\"Tipo Sanguineo\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"lts\"\n                                            v-model=\"editedItem.lts\"\n                                            :rules=\"[v => !!v || 'Obrigatório informar se possui LTS']\"\n                                            label=\"LTS\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"hierarquias\"\n                                            item-text=\"hierarquia\"\n                                            item-value=\"id\"\n                                            v-model=\"editedItem.idHierarquia\"\n                                            :rules=\"[v => !!v || 'Obrigatório informar Posto/Graduação!']\"\n                                            label=\"Hierarquia\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"obms\"\n                                            v-model=\"editedItem.idBatalhao\"\n                                            item-text=\"abreviacao\"\n                                            item-value=\"id\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher a OBM!']\"\n                                            label=\"OBM\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"setores\"\n                                            item-text=\"setor\"\n                                            item-value=\"id\"\n                                            v-model=\"editedItem.idSetor\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher o setor!']\"\n                                            label=\"Setor\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-select\n                                            :items=\"escalas\"\n                                            v-model=\"editedItem.idEscala\"\n                                            item-text=\"escala\"\n                                            item-value=\"id\"\n                                            :rules=\"[v => !!v || 'Obrigatório prencher a escala!']\"\n                                            label=\"Escala\"\n                                            outlined\n                                        ></v-select>\n                                    </v-col>\n\n                                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                        <v-file-input\n                                            color=\"deep-purple accent-4\"\n                                            counter\n                                            label=\"Foto\"\n                                            multiple\n                                            placeholder=\"\"\n                                            prepend-icon=\"mdi-camera\"\n                                            outlined\n                                            :show-size=\"1000\"\n                                            @change=\"setImage\"\n                                        >\n                                            <template v-slot:selection=\"{ index, text }\">\n                                                <v-chip\n                                                    v-if=\"index < 2\"\n                                                    color=\"deep-purple accent-4\"\n                                                    dark\n                                                    label\n                                                    small\n                                                >\n                                                    {{ text }}\n                                                </v-chip>\n\n                                                <span\n                                                    v-else-if=\"index === 2\"\n                                                    class=\"overline grey--text text--darken-3 mx-2\"\n                                                >\n                                                    +{{ foto.length - 2 }} Arquivo\n                                                </span>\n                                            </template>\n                                        </v-file-input>\n                                    </v-col>\n\n                                </v-row>\n                            </v-container>\n                        </v-card-text>\n\n                        <v-card-actions>\n                            <div class=\"flex-grow-1\"></div>\n                            <v-btn color=\"blue darken-1\" text @click=\"close\">Cancelar</v-btn>\n                            <v-btn color=\"blue darken-1\" text @click=\"save\">Salvar</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-dialog>\n            </v-toolbar>\n        </template>\n\n        <template v-slot:item.action=\"{ item }\">\n            <v-icon\n                small\n                class=\"mr-2\"\n                @click=\"editItem(item)\"\n            >\n                mdi-pencil\n            </v-icon>\n            <v-icon\n                small\n                @click=\"deleteItem(item)\"\n            >\n                mdi-delete\n            </v-icon>\n            </template>\n\n            <template v-slot:no-data>\n            <v-btn color=\"primary\" @click=\"initialize\">Reset</v-btn>\n        </template>\n\n    </v-data-table>\n\n</template>\n\n<script>\nexport default {\n    data: () => ({\n        dialog: false,\n        search: \"\",\n        estadosCivils: [\n            \"SOLTEIRO\",\n            \"CASADO\",\n            \"DIVORCIADO\"\n        ],\n        lts: [\n            \"SIM\",\n            \"NÃO\"\n        ],\n        hierarquias: [],\n        obms: [],\n        setores: [],\n        escalas: [],\n        sexos: [\n            \"MASCULINO\",\n            \"FEMININO\"\n        ],\n        tiposSanguineo: [\n            \"A+\",\n            \"A-\",\n            \"B+\",\n            \"B-\",\n            \"AB+\",\n            \"AB-\",\n            \"O+\",\n            \"O-\"\n        ],\n        imgSrc: null,\n        textoSnackbar: \"\",\n        color: 'success',\n        mode: '',\n        snackbar: false,\n        timeout: 6000,\n        x: null,\n        y: 'top',\n        reg: '/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/',\n        rowsPerPageItems: [8, 12, 15],\n        pagination: {\n            rowsPerPage: 20\n        },\n        headers: [\n            {\n                text: 'Nome',\n                align: 'left',\n                sortable: true,\n                value: 'nome',\n            },\n            { text: 'Matrícula', value: 'matricula' },\n            { text: 'C.M.S', value: 'cartaoMunicipalSus' },\n            { text: 'C.N.S', value: 'cartaoNacionalSus' },\n            { text: 'Sexo', value: 'sexo' },\n            { text: 'Tipo Sanguíneo',align: 'center', value: 'tipoSanguineo' },\n            { text: 'Ações', value: 'action', sortable: false },\n        ],\n        desserts: [],\n        editedIndex: -1,\n        editedItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            dataIngresso: \"\",\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\",\n            mode: 'no-cors',\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json',\n        },\n        defaultItem: {\n            nome: \"\",\n            email: \"\",\n            matricula: \"\",\n            dataNascimento: \"\",\n            estadoCivil: null,\n            dataIngresso: \"\",\n            cartaoMunicipalSus: \"\",\n            cartaoNacionalSus: \"\",\n            sexo: \"\",\n            tipoSanguineo: \"\",\n            lts: \"\",\n            idHierarquia: null,\n            idBatalhao: null,\n            idSetor: null,\n            idEscala: null,\n            foto: \"\"\n        },\n    }),\n\n    computed: {\n        formTitle () {\n            return this.editedIndex === -1 ? 'Nova Pessoa' : 'Editar Pessoa'\n        }\n    },\n\n    watch: {\n        dialog (val) {\n            val || this.close()\n        },\n    },\n\n    created () {\n        this.initialize()\n    },\n    methods: {\n        initialize () {\n            this.desserts = [\n                {\n                    nome: \"TESTE\",\n                    matricula: \"123456-7\",\n                    cartaoMunicipalSus: \"123456\",\n                    cartaoNacionalSus: \"123 4567 8912 345\",\n                    sexo: \"MASCULINO\",\n                    tipoSanguineo: \"+O\"\n                }\n            ];\n\n            this.axios.get('http://localhost:3000/pessoa').then(response => {\n                this.desserts = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/hierarquia').then(response => {\n                this.hierarquias = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/batalhao').then(response => {\n                this.obms = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/setor').then(response => {\n                this.setores = response.data;\n            });\n\n            this.axios.get('http://localhost:3000/escala').then(response => {\n                this.escalas = response.data;\n            });\n        },\n\n        editItem (item) {\n            this.editedIndex = this.desserts.indexOf(item);\n            this.editedItem = Object.assign({}, item);\n            this.dialog = true;\n        },\n\n        deleteItem (item) {\n            const index = this.desserts.indexOf(item);\n            confirm('Are you sure you want to delete this item?') && this.desserts.splice(index, 1);\n        },\n\n        close () {\n            this.dialog = false;\n            setTimeout(() => {\n                this.editedItem = Object.assign({}, this.defaultItem)\n                this.editedIndex = -1\n            }, 300);\n        },\n        isValidDate(date) {\n            var aux = [];\n            if(date != ''){\n                aux = date.split('/');\n                if(parseInt(aux[0]) > 0 && parseInt(aux[0]) < 31){\n                    if(parseInt(aux[1]) > 0 && parseInt(aux[1]) < 12){\n                        if(parseInt(aux[2]) > 1900 && parseInt(aux[2]) < 3000){\n                            return true;\n                        }else {\n                            return false;\n                        }\n                    }else {\n                        return false;\n                    }\n                }else {\n                    return false;\n                }\n            }else {\n                return false;\n            }\n        },\n        isValidEmail() {\n            return (this.editedItem.email == \"\")? false : (this.reg.test(this.editedItem.email)) ? true : false;\n        },\n        isValidDateEntrance() {\n            return this.isValidDate(this.editedItem.dataIngresso) && this.isValidDate(this.editedItem.dataNascimento) ? parseInt(this.editedItem.dataIngresso.split('/')[2]) > parseInt(this.editedItem.dataNascimento.split('/')[2]) : false;\n        },\n        validaCampos() {\n            return  this.editedItem.nome != '' &&\n                    this.isValidEmail() &&\n                    this.editedItem.matricula != '' &&\n                    isValidDateEntrance() &&\n                    this.editedItem.estadoCivil != null &&\n                    this.editedItem.cartaoNacionalSus != '' &&\n                    this.editedItem.cartaoMunicipalSus != '' &&\n                    this.editedItem.sexo != '' &&\n                    this.editedItem.tipoSanguineo != \"\" &&\n                    this.editedItem.lts != '' &&\n                    this.editedItem.idHierarquia != null &&\n                    this.editedItem.idBatalhao != null &&\n                    this.editedItem.idSetor != null &&\n                    this.editedItem.idEscala != null &&\n                    this.editedItem.foto != '';\n        },\n        save () {\n            if (this.editedIndex > -1) {\n                Object.assign(this.desserts[this.editedIndex], this.editedItem);\n            } else {\n                if(this.validaCampos()){\n                    this.axios.post('http://localhost:3000/pessoa', this.editedItem).then(response => {\n                        if(response.data.id){\n                            this.textoSnackbar = \"Pessoa inserida com sucesso!\";\n                            this.snackbar = true;\n                            this.color = 'success';\n                            this.initialize();\n                            this.close();\n                        }else {\n                            this.snackbar = true;\n                            this.color = 'error';\n                            this.textoSnackbar = \"Ocorreu um erro ao cadastrar!\";\n                            this.close();\n                        }\n                    });\n                }else {\n                    this.snackbar = true;\n                    this.color = 'error';\n                    this.textoSnackbar = \"Existe campos vazios ou incorretos!\";\n                    this.close();\n                }\n            }\n        },\n        setImage: function (e) {\n            const file = e[0];\n\n            if (!file.type.includes('image/')) {\n                alert('Por favor selecione a foto!');\n                return;\n            }\n\n            if (typeof FileReader === 'function') {\n                const reader = new FileReader();\n\n                reader.onload = (event) => {\n                    this.imgSrc = event.target.result;\n                    this.editedItem.foto = this.imgSrc;\n                }\n                reader.readAsDataURL(file);\n            } else {\n                alert('Sorry, FileReader API not supported');\n            }\n        }\n    }\n}\n</script>\n\n<style>\n    @media only screen and (max-width: 640px) {\n        .snackbar {\n            margin-top: -10px;\n        }\n    }\n\n    @media only screen and (min-width: 640px) {\n        .snackbar {\n            margin-top: -50px;\n        }\n    }\n</style>\n"]}]}