(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b7260da"],{"9bf5":function(t,e,a){},e468:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1 ma-2",attrs:{headers:t.headers,items:t.desserts,search:t.search,"footer-props":{"items-per-page-options":[8,10,12,14]}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"5"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",outlined:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-snackbar",{staticClass:"snackbar",attrs:{bottom:"bottom"===t.y,color:t.color,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n                    "+t._s(t.textoSnackbar)+"\n                    "),a("v-btn",{attrs:{dark:"",text:"",icon:""},on:{click:function(e){t.snackbar=!1}}},[a("v-icon",{staticClass:"mr-2",on:{click:function(e){t.snackbar=!1}}},[t._v("mdi-close")])],1)],1),a("div",{staticClass:"flex-grow-1"}),a("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on;return[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary"},on:{click:t.novo}},[t._v("Novo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Obrigatório prencher o setor!"}],label:"Setor",outlined:""},model:{value:t.editedItem.setor,callback:function(e){t.$set(t.editedItem,"setor",e)},expression:"editedItem.setor"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"Obrigatório prencher a descrição!"}],label:"Descrição",outlined:""},model:{value:t.editedItem.descricao,callback:function(e){t.$set(t.editedItem,"descricao",e)},expression:"editedItem.descricao"}})],1),a("v-select",{attrs:{items:t.obms,"item-text":"abreviacao","item-value":"id",rules:[function(t){return!!t||"Obrigatório prencher a OBM!"}],label:"OBM",outlined:""},model:{value:t.editedItem.idLocal,callback:function(e){t.$set(t.editedItem,"idLocal",e)},expression:"editedItem.idLocal"}})],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Salvar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v("\n            mdi-pencil\n        ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v("\n            mdi-delete\n        ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}])})},s=[],r={data:()=>({dialog:!1,search:"",textoSnackbar:"",color:"success",mode:"",snackbar:!1,timeout:6e3,x:null,y:"top",obms:[],rowsPerPageItems:[8,12,15],pagination:{rowsPerPage:20},headers:[{text:"Setor",align:"left",sortable:!0,value:"setor"},{text:"Descrição",value:"descricao"},{text:"OBM",value:"obm"},{text:"Ações",value:"action",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{setor:"",descricao:"",idLocal:null,createdAt:"",updatedAt:""},defaultItem:{setor:"",descricao:"",idLocal:null,createdAt:"",updatedAt:""}}),computed:{formTitle(){return-1===this.editedIndex?"Novo Setor":"Editar Setor"}},watch:{dialog(t){t||this.close()}},created(){this.initialize()},methods:{novo(){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(t=>{t.data&&(t.data.cadastrosCadastrar&&(this.dialog=!0),t.data.cadastrosCadastrar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para cadastrar!")),t.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},initialize(){this.axios.get("http://localhost:3000/api/batalhao").then(t=>{this.obms=t.data}),this.axios.get("http://localhost:3000/api/setor").then(t=>{this.desserts=t.data;for(var e=0;e<this.desserts.length;e++)for(var a=0;a<this.obms.length;a++)this.desserts[e].idLocal==this.obms[a].id&&(this.desserts[e].obm=this.obms[a].abreviacao)})},editItem(t){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(e=>{e.data&&(e.data.cadastrosEditar&&(this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0),e.data.cadastrosEditar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para editar!")),e.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},deleteItem(t){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(e=>{e.data&&(e.data.cadastrosApagar&&this.axios.delete("http://localhost:3000/api/setor/"+t.id+"/delete").then(t=>{t.data?(this.snackbar=!0,this.color="success",this.textoSnackbar="Setor apagada com sucesso!",this.initialize()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao tentar apagar o registro!")}),e.data.cadastrosApagar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para apagar!")),e.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},validaCampos(){return""!=this.editedItem.abreviacao&&""!=this.editedItem.descricao},save(){this.editedIndex>-1?this.axios.put("http://localhost:3000/api/setor",this.editedItem).then(t=>{t.data?(this.textoSnackbar="Registro atualizado com sucesso!",this.snackbar=!0,this.color="success",this.initialize(),this.close()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao atualizar!",this.close())}):this.validaCampos()?this.axios.post("http://localhost:3000/api/setor",this.editedItem).then(t=>{t.data.id?(this.textoSnackbar="Hierarquia inserido com sucesso!",this.snackbar=!0,this.color="success",this.initialize(),this.close()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao cadastrar!",this.close())}):(this.snackbar=!0,this.color="error",this.textoSnackbar="Existe campos vazios ou incorretos!",this.close())}}},i=r,c=(a("ea31"),a("2877")),l=a("6544"),n=a.n(l),d=a("8336"),h=a("b0af"),u=a("99d9"),m=a("62ad"),b=a("a523"),v=a("8fea"),p=a("169a"),k=a("132d"),x=a("0fd9"),g=a("b974"),f=a("2db4"),I=a("8654"),S=a("71d9"),C=Object(c["a"])(i,o,s,!1,null,null,null);e["default"]=C.exports;n()(C,{VBtn:d["a"],VCard:h["a"],VCardActions:u["a"],VCardText:u["b"],VCardTitle:u["c"],VCol:m["a"],VContainer:b["a"],VDataTable:v["a"],VDialog:p["a"],VIcon:k["a"],VRow:x["a"],VSelect:g["a"],VSnackbar:f["a"],VTextField:I["a"],VToolbar:S["a"]})},ea31:function(t,e,a){"use strict";var o=a("9bf5"),s=a.n(o);s.a}}]);
//# sourceMappingURL=chunk-1b7260da.6da5ab96.js.map