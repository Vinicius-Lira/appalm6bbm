(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e44f2e80"],{"415f":function(a,t,e){"use strict";var s=e("578e"),o=e.n(s);o.a},"578e":function(a,t,e){},a40e:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-data-table",{staticClass:"elevation-1 ma-2",attrs:{headers:a.headers,items:a.desserts,search:a.search,"sort-by":"calories","footer-props":{"items-per-page-options":[8,10,12,14]}},scopedSlots:a._u([{key:"top",fn:function(){return[e("v-toolbar",{attrs:{flat:"",color:"white"}},[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"5"}},[e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",outlined:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)],1)],1),e("div",{staticClass:"flex-grow-1"}),e("nova-pessoa",{attrs:{dialogNovo:a.dialogNovo,hierarquias:a.hierarquias,obms:a.obms,setores:a.setores},on:{close:a.closeNovo}}),e("editar-pessoa",{attrs:{dialogEditar:a.dialogEditar,hierarquias:a.hierarquias,obms:a.obms,setores:a.setores,escalas:a.escalas,pessoa:a.pessoa},on:{close:a.closeEditar}}),e("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:a._u([{key:"activator",fn:function(t){t.on;return[e("v-btn",{staticClass:"mb-2",attrs:{color:"primary"},on:{click:a.nova}},[a._v("Nova")])]}}]),model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}})],1)]},proxy:!0},{key:"item.action",fn:function(t){var s=t.item;return[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return a.editarPessoa(s)}}},[a._v("\n            mdi-pencil\n        ")]),e("v-icon",{attrs:{small:""},on:{click:function(t){return a.deleteItem(s)}}},[a._v("\n            mdi-delete\n        ")])]}},{key:"no-data",fn:function(){return[e("v-btn",{attrs:{color:"primary"},on:{click:a.initialize}},[a._v("Reset")])]},proxy:!0}])})},o=[],r={data:()=>({dialog:!1,search:"",hierarquias:[],obms:[],setores:[],escalas:[],dialogNovo:!1,dialogEditar:!1,tipoPessoas:[{tipo:"Administrador",value:"true"},{tipo:"Normal",value:"false"}],imgSrc:null,rowsPerPageItems:[8,12,15],pagination:{rowsPerPage:20},headers:[{text:"Nome",align:"left",sortable:!0,value:"nome"},{text:"Matrícula",value:"matricula"},{text:"Hierarquia",value:"hierarquia"},{text:"OBM",value:"obm"},{text:"Setor",value:"setor"},{text:"Ações",value:"action",sortable:!1}],desserts:[],editedIndex:-1,pessoa:{},snackbar:{text:"",color:"",state:!1}}),computed:{formTitle(){return-1===this.editedIndex?"Nova Pessoa":"Editar Pessoa"}},watch:{dialog(a){a||this.close()}},created(){this.initialize()},methods:{nova(){localStorage.getItem("usuarioAppB4")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuarioAppB4")).then(a=>{a.data&&(a.data.cadastrosCadastrar&&(this.dialogNovo=!0),a.data.cadastrosCadastrar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para cadastrar!")),a.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},closeEditar(){this.dialogEditar=!1,this.initialize()},closeNovo(){this.dialogNovo=!1,this.initialize()},deleteItem(a){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuarioAppB4")).then(t=>{t.data&&(t.data.cadastrosApagar&&this.axios.delete("http://localhost:3000/api/pessoa/"+a.id+"/delete").then(a=>{a.data&&(this.snackbar.color="success",this.snackbar.text="Pessoa apagada com sucesso!",this.initialize()),a.data||(this.snackbar.color="error",this.snackbar.text="Ocorreu um erro ao tentar apagar o registro!"),this.snackbar.state=!0}),t.data.cadastrosApagar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para apagar!")),t.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},editarPessoa(a){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuarioAppB4")).then(t=>{t.data&&(t.data.cadastrosEditar&&(this.pessoa=Object.assign({},a),this.dialogEditar=!0),t.data.cadastrosEditar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para editar!")),t.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},initialize(){this.desserts=[],this.axios.get("http://localhost:3000/api/hierarquia").then(a=>{this.hierarquias=a.data}),this.axios.get("http://localhost:3000/api/batalhao").then(a=>{this.obms=a.data}),this.axios.get("http://localhost:3000/api/setor").then(a=>{this.setores=a.data}),this.axios.get("http://localhost:3000/api/pessoa").then(a=>{this.desserts=a.data;var t=0;for(t in this.desserts)this.desserts[t].dataNascimento&&(this.desserts[t].dataNascimento=this.desserts[t].dataNascimento.toString().split("T")[0].split("-").reverse().join("/"))})}}},i=r,l=(e("415f"),e("2877")),n=e("6544"),c=e.n(n),d=e("8336"),h=e("62ad"),u=e("a523"),p=e("8fea"),m=e("169a"),g=e("132d"),v=e("0fd9"),b=e("8654"),x=e("71d9"),f=Object(l["a"])(i,s,o,!1,null,null,null);t["default"]=f.exports;c()(f,{VBtn:d["a"],VCol:h["a"],VContainer:u["a"],VDataTable:p["a"],VDialog:m["a"],VIcon:g["a"],VRow:v["a"],VTextField:b["a"],VToolbar:x["a"]})}}]);
//# sourceMappingURL=chunk-e44f2e80.239c4e62.js.map