(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4d503a8"],{"2bfd":function(t,e,a){},"7e2e":function(t,e,a){},"945b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1 ma-2",attrs:{headers:t.headers,items:t.desserts,search:t.search,"footer-props":{"items-per-page-options":[8,10,12,14]}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"5"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",outlined:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-snackbar",{staticClass:"snackbar",attrs:{bottom:"bottom"===t.y,color:t.color,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n                    "+t._s(t.textoSnackbar)+"\n                    "),a("v-btn",{attrs:{dark:"",text:"",icon:""},on:{click:function(e){t.snackbar=!1}}},[a("v-icon",{staticClass:"mr-2",on:{click:function(e){t.snackbar=!1}}},[t._v("mdi-close")])],1)],1),a("div",{staticClass:"flex-grow-1"}),a("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on;return[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary"},on:{click:t.novo}},[t._v("Novo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-autocomplete",{attrs:{label:"Patrimônio",items:t.patrimonios,"item-text":"descricao","item-value":"id",outlined:""},model:{value:t.editedItem.idPatrimonio,callback:function(e){t.$set(t.editedItem,"idPatrimonio",e)},expression:" editedItem.idPatrimonio"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"8"}},[a("v-autocomplete",{attrs:{label:"Novo Responsável",items:t.pessoas,"item-text":"nome","item-value":"id",outlined:""},model:{value:t.editedItem.idResponsavelAtual,callback:function(e){t.$set(t.editedItem,"idResponsavelAtual",e)},expression:" editedItem.idResponsavelAtual"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[a("v-select",{attrs:{items:t.setores,"item-text":"setor","item-value":"id",label:"Setor Novo",outlined:""},model:{value:t.editedItem.idSetorAtual,callback:function(e){t.$set(t.editedItem,"idSetorAtual",e)},expression:" editedItem.idSetorAtual"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[a("v-select",{attrs:{items:t.situacoes,"item-text":"situacao","item-value":"id",label:"Situação",outlined:""},model:{value:t.editedItem.idSituacaoAtual,callback:function(e){t.$set(t.editedItem,"idSituacaoAtual",e)},expression:" editedItem.idSituacaoAtual"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],attrs:{rules:[function(t){return!!t||"Obrigatório prencher a data movimentação!"}],label:"Data Movimentação",outlined:""},model:{value:t.editedItem.dataMovimentacao,callback:function(e){t.$set(t.editedItem,"dataMovimentacao",e)},expression:"editedItem.dataMovimentacao"}})],1)],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Salvar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v("\n            mdi-pencil\n        ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v("\n            mdi-delete\n        ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}])})},s=[],o={name:"obm",data:()=>({dialog:!1,search:"",textoSnackbar:"",color:"success",mode:"",snackbar:!1,timeout:6e3,x:null,y:"top",rowsPerPageItems:[8,12,15],pagination:{rowsPerPage:20},headers:[{text:"Código Patri.",align:"left",sortable:!0,value:"codigo"},{text:"Identificação",value:"identificacao"},{text:"Responsável Novo",value:"responsavelNovo"},{text:"Setor Novo",value:"setorAtual"},{text:"Data Mov.",value:"dataMovimentacao"},{text:"Ações",value:"action",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{idPatrimonio:"",idResponsavelAnterior:"",idResponsavelAtual:"",idSetorAnterior:"",idSetorAtual:"",idSituacaoAnterior:"",idSituacaoAtual:"",dataMovimentacao:"",createdAt:"",updatedAt:""},defaultItem:{idPatrimonio:"",idResponsavelAnterior:"",idResponsavelAtual:"",idSetorAnterior:"",idSetorAtual:"",idSituacaoAnterior:"",idSituacaoAtual:"",dataMovimentacao:"",createdAt:"",updatedAt:""},patrimonios:[],setores:[],situacoes:[],pessoas:[]}),computed:{formTitle(){return-1===this.editedIndex?"Nova Movimentação":"Editar Movimentação"}},watch:{dialog(t){t||this.close()}},created(){this.initialize()},methods:{novo(){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(t=>{t.data&&(t.data.patrimonioMovimentar&&(this.dialog=!0),t.data.patrimonioMovimentar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para movimentar patrimônios!")),t.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},initialize(){this.axios.get("http://localhost:3000/api/movimentacaoPatrimonio").then(t=>{this.desserts=t.data}),this.axios.get("http://localhost:3000/api/pessoa").then(t=>{this.pessoas=t.data}),this.axios.get("http://localhost:3000/api/setor").then(t=>{this.setores=t.data}),this.axios.get("http://localhost:3000/api/situacaoPatrimonio").then(t=>{this.situacoes=t.data}),this.axios.get("http://localhost:3000/api/patrimonio").then(t=>{this.patrimonios=t.data})},editItem(t){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(e=>{e.data&&(e.data.patrimonioMovimentarEditar&&(this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0),e.data.patrimonioMovimentarEditar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para editar movimentações de patrimônios!")),e.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},deleteItem(t){localStorage.getItem("usuario")&&this.axios.get("http://localhost:3000/api/permissao/"+localStorage.getItem("usuario")).then(e=>{e.data&&(e.data.patrimonioMovimentarApagar&&this.axios.delete("http://localhost:3000/api/movimentacaoPatrimonio/"+t.id+"/delete").then(t=>{t.data?(this.snackbar=!0,this.color="success",this.textoSnackbar="Movimentação apagada com sucesso!",this.initialize()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao tentar apagar o registro!")}),e.data.patrimonioMovimentarApagar||(this.snackbar=!0,this.color="error",this.textoSnackbar="Você não tem permissão para apagar movimentações de patrimônios!")),e.data||(this.snackbar=!0,this.color="error",this.textoSnackbar="Tente novamente ocorreu um erro!")})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){this.editedIndex>-1?this.axios.put("http://localhost:3000/api/movimentacaoPatrimonio",this.editedItem).then(t=>{t.data?(this.textoSnackbar="Registro atualizado com sucesso!",this.snackbar=!0,this.color="success",this.initialize(),this.close()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao atualizar!",this.close())}):this.axios.post("http://localhost:3000/api/movimentacaoPatrimonio",this.editedItem).then(t=>{t.data.id?(this.textoSnackbar="Movimentação inserida com sucesso!",this.snackbar=!0,this.color="success",this.initialize(),this.close()):(this.snackbar=!0,this.color="error",this.textoSnackbar="Ocorreu um erro ao cadastrar!",this.close())})}}},n=o,r=(a("c2b6"),a("2877")),l=a("6544"),c=a.n(l),d=a("c6a6"),h=a("8336"),u=a("b0af"),m=a("99d9"),p=a("62ad"),v=a("a523"),I=a("8fea"),x=a("169a"),g=a("132d"),b=a("0fd9"),S=a("b974"),f=a("2db4"),k=a("8654"),w=a("71d9"),y=Object(r["a"])(n,i,s,!1,null,null,null);e["default"]=y.exports;c()(y,{VAutocomplete:d["a"],VBtn:h["a"],VCard:u["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:p["a"],VContainer:v["a"],VDataTable:I["a"],VDialog:x["a"],VIcon:g["a"],VRow:b["a"],VSelect:S["a"],VSnackbar:f["a"],VTextField:k["a"],VToolbar:w["a"]})},c2b6:function(t,e,a){"use strict";var i=a("7e2e"),s=a.n(i);s.a},c6a6:function(t,e,a){"use strict";a("2bfd");var i=a("b974"),s=a("8654"),o=a("80d2");const n={...i["b"],offsetY:!0,offsetOverflow:!0,transition:!1};e["a"]=i["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,a)=>{return a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:i["a"].options.props.menuProps.type,default:()=>n},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>this.filter(t,String(this.internalSearch),String(this.getText(t))))},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=i["a"].options.computed.$_menuProps.call(this);return t.contentClass=`v-autocomplete__content ${t.contentClass||""}`.trim(),{...n,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>{return this.valueComparator(this.getValue(t),this.getValue(this.internalValue))})},listData(){const t=i["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?this.$refs.input&&this.$refs.input.select():this.updateSelf()},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},methods:{onFilteredItemsChanged(t,e){t!==e&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){if(this.searchIsDirty)return;if(![o["w"].backspace,o["w"].left,o["w"].right,o["w"].delete].includes(t))return;const e=this.selectedItems.length-1;if(t===o["w"].left)-1===this.selectedIndex?this.selectedIndex=e:this.selectedIndex--;else if(t===o["w"].right)this.selectedIndex>=e?this.selectedIndex=-1:this.selectedIndex++;else if(-1===this.selectedIndex)return void(this.selectedIndex=e);const a=this.selectedItems[this.selectedIndex];if([o["w"].backspace,o["w"].delete].includes(t)&&!this.getDisabled(a)){const t=this.selectedIndex===e?this.selectedIndex-1:this.selectedItems[this.selectedIndex+1]?this.selectedIndex:-1;-1===t?this.setValue(this.multiple?[]:void 0):this.selectItem(a),this.selectedIndex=t}},clearableCallback(){this.internalSearch=void 0,i["a"].options.methods.clearableCallback.call(this)},genInput(){const t=s["a"].options.methods.genInput.call(this);return t.data=t.data||{},t.data.attrs=t.data.attrs||{},t.data.domProps=t.data.domProps||{},t.data.domProps.value=this.internalSearch,t},genInputSlot(){const t=i["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?i["a"].options.methods.genSelections.call(this):[]},onClick(){this.isDisabled||(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,a=e.value;e.value&&this.activateMenu(),this.internalSearch=a,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;i["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){i["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(){this.activateMenu()},selectItem(t){i["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){i["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1}}})}}]);
//# sourceMappingURL=chunk-b4d503a8.8ecbbc7d.js.map